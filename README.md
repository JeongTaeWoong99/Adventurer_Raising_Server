## ğŸ“‹ ëª©ì°¨
- [ê°œìš”](#-ê°œìš”)
- [ì£¼ìš” ê¸°ëŠ¥](#-ì£¼ìš”-ê¸°ëŠ¥)
- [í”„ë¡œì íŠ¸ êµ¬ì¡°](#-í”„ë¡œì íŠ¸-êµ¬ì¡°)
- [ê¸°ìˆ  ìŠ¤íƒ](#-ê¸°ìˆ -ìŠ¤íƒ)
- [ì‹œì‘í•˜ê¸°](#-ì‹œì‘í•˜ê¸°)
- [ì•„í‚¤í…ì²˜](#-ì•„í‚¤í…ì²˜)

## ğŸ“– ê°œìš”

ì´ í”„ë¡œì íŠ¸ëŠ” Unity í´ë¼ì´ì–¸íŠ¸ì™€ í†µì‹ í•˜ëŠ” ê³ ì„±ëŠ¥ ê²Œì„ ì„œë²„ì…ë‹ˆë‹¤. ë¹„ë™ê¸° ì†Œì¼“ í†µì‹ , íŒ¨í‚· ìë™ ìƒì„±, Firebase ì—°ë™ì„ í†µí•´ ì‹¤ì‹œê°„ ë©€í‹°í”Œë ˆì´ì–´ RPG ê²Œì„ì„ ì§€ì›í•©ë‹ˆë‹¤.

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

### ğŸ”„ ì‹¤ì‹œê°„ ë©€í‹°í”Œë ˆì´ì–´
- ë¹„ë™ê¸° TCP ì†Œì¼“ í†µì‹  (40FPS ì„œë²„ í‹±)
- GameRoom ê¸°ë°˜ ì”¬ë³„ ì„¸ì…˜ ê´€ë¦¬
- í”Œë ˆì´ì–´/ëª¬ìŠ¤í„°/ì˜¤ë¸Œì íŠ¸ ë™ê¸°í™”

### ğŸ“¦ ìë™ íŒ¨í‚· ìƒì„± ì‹œìŠ¤í…œ
- XML ê¸°ë°˜ íŒ¨í‚· ì •ì˜ (PDL.xml)
- C# íŒ¨í‚· í´ë˜ìŠ¤ ìë™ ìƒì„±
- í´ë¼ì´ì–¸íŠ¸/ì„œë²„ íŒ¨í‚· ë§¤ë‹ˆì € ìë™ ìƒì„±
- ì§ë ¬í™”/ì—­ì§ë ¬í™” ì½”ë“œ ìë™í™”

### ğŸ¯ ê²Œì„ ì‹œìŠ¤í…œ
- **ì „íˆ¬ ì‹œìŠ¤í…œ** : ê³µê²© íŒì •, ë°ë¯¸ì§€ ê³„ì‚°, íˆíŠ¸ë°•ìŠ¤ ì¶©ëŒ ì²˜ë¦¬
- **ê²½í—˜ì¹˜/ë ˆë²¨ì—…** : ëª¬ìŠ¤í„° ì²˜ì¹˜ ì‹œ ê²½í—˜ì¹˜ íšë“ ë° ë ˆë²¨ì—…
- **ìŠ¤í° ê´€ë¦¬** : ëª¬ìŠ¤í„°/ì˜¤ë¸Œì íŠ¸ ìë™ ìŠ¤í° ë° ë¦¬ìŠ¤í°
- **ìŠ¤ì¼€ì¤„ë§** : ì• ë‹ˆë©”ì´ì…˜ íƒ€ì´ë°, ìë™ ê³µê²©, ë¦¬ìŠ¤í° ìŠ¤ì¼€ì¤„ë§
- **ì‹¤ì‹œê°„ ì±„íŒ…** : ê²Œì„ ë‚´ ì±„íŒ… ì‹œìŠ¤í…œ

### ğŸ” ì¸ì¦ ë° ë°ì´í„° ê´€ë¦¬
- Firebase Authentication ì—°ë™
- Firebase Realtime Database (ìœ ì € ë°ì´í„°)
- Cloud Firestore (ê²Œì„ ì„¤ì • ë°ì´í„°)
- JSON ê¸°ë°˜ ê²Œì„ ë°ì´í„° ë¡œë“œ

## ğŸ“‚ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
3D_RPG_Server/
â”œâ”€â”€ PacketGenerator/          # íŒ¨í‚· ìë™ ìƒì„± ë„êµ¬
â”‚   â”œâ”€â”€ Program.cs            # XML íŒŒì„œ ë° ì½”ë“œ ìƒì„±ê¸°
â”‚   â”œâ”€â”€ PacketFormat.cs       # C# íŒ¨í‚· í…œí”Œë¦¿
â”‚   â””â”€â”€ bin/
â”‚       â”œâ”€â”€ GenPackets.cs     # ìƒì„±ëœ íŒ¨í‚· í´ë˜ìŠ¤
â”‚       â”œâ”€â”€ ClientPacketManager.cs
â”‚       â””â”€â”€ ServerPacketManager.cs
â”‚
â”œâ”€â”€ Server/                   # ê²Œì„ ì„œë²„ ë©”ì¸ ë¡œì§
â”‚   â”œâ”€â”€ Program.cs            # ì„œë²„ ì§„ì…ì 
â”‚   â”œâ”€â”€ GameRoom.cs           # ê²Œì„ ë£¸ ê´€ë¦¬
â”‚   â”œâ”€â”€ Session/
â”‚   â”‚   â”œâ”€â”€ ClientSession.cs      # í”Œë ˆì´ì–´ ì„¸ì…˜
â”‚   â”‚   â”œâ”€â”€ MonsterSession.cs     # ëª¬ìŠ¤í„° ì„¸ì…˜
â”‚   â”‚   â”œâ”€â”€ ObjectSession.cs      # ì˜¤ë¸Œì íŠ¸ ì„¸ì…˜
â”‚   â”‚   â”œâ”€â”€ CommonSession.cs      # ê³µí†µ ì„¸ì…˜ ë² ì´ìŠ¤
â”‚   â”‚   â””â”€â”€ SessionManager.cs     # ì„¸ì…˜ ê´€ë¦¬ì
â”‚   â”œâ”€â”€ DB/
â”‚   â”‚   â”œâ”€â”€ DBManager.cs          # ë°ì´í„° í†µí•© ê´€ë¦¬
â”‚   â”‚   â”œâ”€â”€ AuthManager.cs        # Firebase Auth
â”‚   â”‚   â”œâ”€â”€ RealTimeManager.cs    # Firebase Realtime DB
â”‚   â”‚   â””â”€â”€ FirestoreManager.cs   # Cloud Firestore
â”‚   â”œâ”€â”€ Packet/
â”‚   â”‚   â”œâ”€â”€ PacketHandler.cs      # íŒ¨í‚· ì²˜ë¦¬ í•¸ë“¤ëŸ¬
â”‚   â”‚   â””â”€â”€ ServerPacketManager.cs
â”‚   â”œâ”€â”€ AttackManager.cs      # ì „íˆ¬ ì‹œìŠ¤í…œ
â”‚   â”œâ”€â”€ SpawnManager.cs       # ìŠ¤í° ê´€ë¦¬
â”‚   â”œâ”€â”€ ScheduleManager.cs    # ì‘ì—… ìŠ¤ì¼€ì¤„ë§
â”‚   â””â”€â”€ Utils/
â”‚       â”œâ”€â”€ Define.cs         # ìƒìˆ˜ ë° ì—´ê±°í˜•
â”‚       â””â”€â”€ Extension.cs      # í™•ì¥ ë©”ì„œë“œ
â”‚
â”œâ”€â”€ ServerCore/              # ë„¤íŠ¸ì›Œí¬ ì½”ì–´ ë¼ì´ë¸ŒëŸ¬ë¦¬
â”‚   â”œâ”€â”€ Listener.cs          # TCP ë¦¬ìŠ¤ë„ˆ
â”‚   â”œâ”€â”€ Session.cs           # ì„¸ì…˜ ë² ì´ìŠ¤ í´ë˜ìŠ¤
â”‚   â”œâ”€â”€ RecvBuffer.cs        # ìˆ˜ì‹  ë²„í¼
â”‚   â”œâ”€â”€ SendBuffer.cs        # ì†¡ì‹  ë²„í¼
â”‚   â”œâ”€â”€ JobQueue.cs          # ë‹¨ì¼ ìŠ¤ë ˆë“œ ì‘ì—… í
â”‚   â”œâ”€â”€ PriorityQueue.cs     # ìš°ì„ ìˆœìœ„ í
â”‚   â””â”€â”€ Connector.cs         # í´ë¼ì´ì–¸íŠ¸ ì—°ê²° í—¬í¼
â”‚
â””â”€â”€ Data/                     # ê²Œì„ ë°ì´í„° (JSON)
    â”œâ”€â”€ CharacterInfoData.json
    â”œâ”€â”€ AttackInfoData.json
    â”œâ”€â”€ MonsterSceneSettingData.json
    â”œâ”€â”€ ObjectSceneSettingData.json
    â””â”€â”€ NetworkRoomSceneData.json
```

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

- **ì–¸ì–´** : C# (.NET 9.0)
- **ë„¤íŠ¸ì›Œí‚¹** : Async Socket (TCP)
- **ë°ì´í„°ë² ì´ìŠ¤**:
  - Firebase Realtime Database
  - Cloud Firestore
- **ì¸ì¦** : Firebase Authentication
- **ë°ì´í„° í¬ë§·** : JSON (Newtonsoft.Json)
- **ë¹Œë“œ** : .NET SDK

## ğŸ— ì•„í‚¤í…ì²˜

### íŒ¨í‚· ì²˜ë¦¬ í”Œë¡œìš°
```
[í´ë¼ì´ì–¸íŠ¸]
    â†“ TCP íŒ¨í‚· ì „ì†¡
[Listener] â†’ [ClientSession]
    â†“ OnRecvPacket
[PacketManager] â†’ íŒ¨í‚· ì—­ì§ë ¬í™”
    â†“
[PacketHandler] â†’ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì²˜ë¦¬
    â†“
[GameRoom] â†’ JobQueueë¥¼ í†µí•œ ë‹¨ì¼ ìŠ¤ë ˆë“œ ì²˜ë¦¬
    â†“
[Broadcast] â†’ ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë™ê¸°í™”
```

### í•µì‹¬ ì„¤ê³„ íŒ¨í„´

#### 1. **PacketGenerator - ì½”ë“œ ìë™ ìƒì„±**
- XML ê¸°ë°˜ íŒ¨í‚· ì •ì˜ë¡œ ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ
- ì§ë ¬í™”/ì—­ì§ë ¬í™” ì½”ë“œ ìë™ ìƒì„±
- í´ë¼ì´ì–¸íŠ¸/ì„œë²„ ë™ì‹œ ì§€ì›

**PacketGenerator/Program.cs:18-65** - XML íŒŒì‹± ë° ì½”ë“œ ìƒì„± ë©”ì¸ ë¡œì§
```csharp
// PDL.xml ì½ê¸° â†’ íŒ¨í‚· í´ë˜ìŠ¤ ìƒì„± â†’ Manager ë“±ë¡ ìë™í™”
```

#### 2. **JobQueue - ë‹¨ì¼ ìŠ¤ë ˆë“œ ë™ê¸°í™”**
- GameRoomë³„ ì‘ì—… íë¥¼ í†µí•œ ë™ì‹œì„± ì œì–´
- ë½ í”„ë¦¬ ë‹¨ì¼ ìŠ¤ë ˆë“œ ì²˜ë¦¬ë¡œ ë°ì´í„° ë ˆì´ìŠ¤ ë°©ì§€

**ServerCore/JobQueue.cs:14-77** - ì‘ì—… í êµ¬í˜„
**Server/GameRoom.cs:40-65** - Flushë¥¼ í†µí•œ 40FPS ë™ê¸°í™”

#### 3. **Session ê³„ì¸µ êµ¬ì¡°**
```
Session (ServerCore)
  â†“
PacketSession (íŒ¨í‚· íŒŒì‹±)
  â†“
CommonSession (ê³µí†µ ì—”í‹°í‹° ì†ì„±)
  â†“
ClientSession / MonsterSession / ObjectSession
```

**ServerCore/Session.cs:69-297** - ë¹„ë™ê¸° ì†Œì¼“ í†µì‹  ë² ì´ìŠ¤
**Server/Session/ClientSession.cs:12-76** - í”Œë ˆì´ì–´ ì„¸ì…˜ êµ¬í˜„

#### 4. **ë¹„ë™ê¸° ì†Œì¼“ í†µì‹ **
- `SocketAsyncEventArgs`ë¥¼ í™œìš©í•œ ê³ ì„±ëŠ¥ ë¹„ë™ê¸° I/O
- RecvBuffer/SendBufferë¥¼ í†µí•œ íš¨ìœ¨ì ì¸ ë²„í¼ ê´€ë¦¬
- ëª¨ì•„ë³´ë‚´ê¸° ìµœì í™”

**ServerCore/Listener.cs:8-97** - í´ë¼ì´ì–¸íŠ¸ Accept ì²˜ë¦¬

## ğŸ“Š ì„±ëŠ¥ íŠ¹ì§•

- **ì„œë²„ í‹±ë ˆì´íŠ¸** : 40FPS (25ms ê°„ê²©)
- **ë™ì‹œ ì ‘ì†** : ë£¸ë³„ ë…ë¦½ì ì¸ JobQueueë¡œ í™•ì¥ ê°€ëŠ¥
- **íŒ¨í‚· ì²˜ë¦¬** : ë¹„ë™ê¸° ì†Œì¼“ + ë‹¨ì¼ ìŠ¤ë ˆë“œ íë¡œ ì•ˆì •ì„± í™•ë³´
- **ë²„í¼ ê´€ë¦¬** : RecvBuffer 64KB, SendBuffer ë™ì  í• ë‹¹

## ğŸ”— ê´€ë ¨ í”„ë¡œì íŠ¸

- [Unity í´ë¼ì´ì–¸íŠ¸](https://github.com/JeongTaeWoong99/Adventurer_Raising_Client) - 3D RPG ê²Œì„ í´ë¼ì´ì–¸íŠ¸

## ğŸ“ ë¼ì´ì„ ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” ê°œì¸ í•™ìŠµ ëª©ì ìœ¼ë¡œ ì œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.

---

**ê°œë°œì**: [@JeongTaeWoong99](https://github.com/JeongTaeWoong99)
